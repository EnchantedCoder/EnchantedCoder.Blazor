@page "/EcGrid_Issue412_Test"
@using System.Globalization
@inject ILogger<EcGrid_Issue412_Test> logger

<EcGrid Responsive="true" TItem="CultureInfo" DataProvider="ClientSideProcessingDataProvider" PageSize="10" @ref="grid">
    <Columns>
        <EcGridColumn TItem="CultureInfo" HeaderText="LCID" ItemTextSelector="@(item => item.LCID.ToString())" SortKeySelector="@(item => item.LCID)" IsDefaultSortColumn="true" />
        <EcGridColumn TItem="CultureInfo" HeaderText="DisplayName" ItemTextSelector="@(item => item.DisplayName)" SortKeySelector="@(item => item.DisplayName)" />
    </Columns>
</EcGrid>

<EcInputNumber Label="Limit number of items" @bind-Value="maxItems" />
<EcButton Text="Refresh" OnClick="async () => await grid.RefreshDataAsync()" />

@code {
    private EcGrid<CultureInfo> grid;
    private int maxItems = 1000;
    private List<CultureInfo> localCultureInfos = CultureInfo.GetCultures(CultureTypes.AllCultures).ToList();

    private Task<GridDataProviderResult<CultureInfo>> ClientSideProcessingDataProvider(GridDataProviderRequest<CultureInfo> request)
    {
        logger.LogInformation(request.StartIndex.ToString());
        return Task.FromResult(request.ApplyTo(localCultureInfos.Take(maxItems)));
    }
}