@page "/EcListLayoutTest"

<h1>EcListLayout</h1>

<EcListLayout Title="Title" TFilterModel="FilterModelDto" FilterModel="filterModel" FilterModelChanged="HandleFilterModelChanged">
	<NamedViewsTemplate>
		<EcNamedViewList TFilterModel="FilterModelDto" FilterModel="filterModel" FilterModelChanged="HandleFilterModelChanged" NamedViews="namedViews" OnNamedViewSelected="NamedViewSelected" />
	</NamedViewsTemplate>
    <FilterTemplate Context="filterContext">
        <EcInputNumber Label="MinimumItemId" @bind-Value="filterContext.MinimumItemId" />
        <EcInputText Label="Name containing" @bind-Value="filterContext.NameContains" />
        <EcInputNumber Label="Minimum Age" @bind-Value="filterContext.MinimumAge" />
        <EcInputNumber Label="Maximum Age" @bind-Value="filterContext.MaximumAge" />
    <EcInputTags Label="Tags (ThemeColor)" @bind-Value="filterContext.Tags" DataProvider="GetTagsSuggestions"/>
    </FilterTemplate>
	<CommandsTemplate>
		<EcButton Text="Add" Icon="BootstrapIcon.Plus" Color="ThemeColor.Secondary" OnClick="NewItemClicked" />
	</CommandsTemplate>
	<DataTemplate>
		<EcGrid @ref="gridComponent" TItem="DataItemDto" PageSize="20" DataProvider="LoadDataItems" SelectedDataItem="currentItem" SelectedDataItemChanged="HandleSelectedDataItemChanged">
            <Columns>
                <EcGridColumn TItem="DataItemDto" HeaderText="Id" ItemTextSelector="@(item => item.ItemId.ToString())" SortString="@nameof(DataItemDto.ItemId)" IsDefaultSortColumn="true" />
                <EcGridColumn TItem="DataItemDto" HeaderText="Name" ItemTextSelector="@(item => item.Name)" SortString="@nameof(DataItemDto.Name)" />
                <EcGridColumn TItem="DataItemDto" HeaderText="Email" ItemTextSelector="@(item => item.Email)" SortString="@nameof(DataItemDto.Email)" />
                <EcGridColumn TItem="DataItemDto" HeaderText="Phone number" ItemTextSelector="@(item => item.PhoneNumber)" SortString="@nameof(DataItemDto.PhoneNumber)" />
                <EcGridColumn TItem="DataItemDto" HeaderText="Age" ItemTextSelector="@(item => item.Age.ToString())" SortString="@nameof(DataItemDto.Age)" />
				<EcContextMenuGridColumn Context="item">
					<EcContextMenu>
						<EcContextMenuItem Text="Delete" OnClick="async () => await DeleteItemClicked(item)" ConfirmationQuestion="@($"Do you realy want to delete {item.Name}?")" />
					</EcContextMenu>
				</EcContextMenuGridColumn>
            </Columns>
		</EcGrid>
	</DataTemplate>
	<DetailTemplate>
		Edit: @currentItem?.ItemId
	</DetailTemplate>
</EcListLayout>
