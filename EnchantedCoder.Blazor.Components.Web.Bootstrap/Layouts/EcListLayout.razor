@namespace EnchantedCoder.Blazor.Components.Web.Bootstrap
@typeparam TFilterModel

<div class="@CssClassHelper.Combine("ec-list-layout", CssClassEffective)">
	<EcCard Settings="this.CardSettingsEffective">
		<BodyTemplate>
			<div class="ec-list-layout-header hstack gap-2">
					@if (NamedViewsTemplate != null)
					{
						<div class="ec-list-layout-header-dropdown">
							<div class="ec-list-layout-named-view dropdown">
								<span role="button" id="dropdownMenuLink" class="ec-list-layout-dropdown-menu-link" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<h5 class="card-title">
										@if (TitleTemplate != null)
										{
											@TitleTemplate
										}
										else if (!String.IsNullOrEmpty(Title))
										{
											@Title
										}
										<EcIcon CssClass="ms-1" Icon="@BootstrapIcon.ChevronDown" />
									</h5>
								</span>
								@NamedViewsTemplate
							</div>
						</div>
					}
					else if (TitleTemplate != null)
					{
						<h5 class="card-title me-auto">@TitleTemplate</h5>
					}
					else if (!String.IsNullOrEmpty(Title))
					{
						<h5 class="card-title me-auto">@Title</h5>
					}
				@if (SearchTemplate != null)
				{
					@SearchTemplate
				}
				@if (FilterTemplate != null)
				{
					<EcButton Settings="this.FilterOpenButtonSettingsEffective" OnClick="HandleFilterButtonClick" />
				}
				@if (CommandsTemplate != null)
				{
					@CommandsTemplate
				}
			</div>
			@if (FilterModel != null)
			{
				<EcChipList Chips="chips" OnChipRemoveClick="HandleChipRemoveClick" />
			}
			@if (FilterTemplate != null)
			{
				<EcOffcanvas @ref="filterOffcanvasComponent" RenderMode="OffcanvasRenderMode.Always" Title="@Localizer["FilterHeaderTitle"]" Settings="this.FilterOffcanvasSettingsEffective">
					<BodyTemplate>
						<EcFilterForm @ref="filterForm"
								Id="@filterFormId"
								TModel="TFilterModel"
								Model="FilterModel"
								ModelChanged="HandleFilterFormModelChanged"
								Context="filterContext"
								OnChipsUpdated="HandleChipUpdated">
							@FilterTemplate(filterContext)
						</EcFilterForm>
					</BodyTemplate>
					<FooterTemplate>
						<EcSubmit Settings="this.FilterSubmitButtonSettingsEffective" FormId="@filterFormId" Text="@Localizer["FilterApplyButtonText"]" />
					</FooterTemplate>
				</EcOffcanvas>
			}
		</BodyTemplate>
		<ChildContent>
			@DataTemplate
		</ChildContent>
	</EcCard>
	@DetailTemplate
</div>